(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70778,e=>{"use strict";var t,a,r,s=e.i(54312),i=e.i(31985),n=e.i(21720),o=e.i(48328),c=e.i(25445);e.i(47167);var u=e.i(31157),l=e.i(12440),d=e.i(87896),k=e.i(38340);e.i(96319),e.i(34583),e.i(94999),e.i(27408);var g=e.i(41960),v=((t=v||{})[t.Staker=0]="Staker",t[t.Withdrawer=1]="Withdrawer",t),y="Stake11111111111111111111111111111111111111",h=((a=h||{})[a.StakeStateAccount=0]="StakeStateAccount",a),S=((r=S||{})[r.Initialize=0]="Initialize",r[r.Authorize=1]="Authorize",r[r.DelegateStake=2]="DelegateStake",r[r.Split=3]="Split",r[r.Withdraw=4]="Withdraw",r[r.Deactivate=5]="Deactivate",r[r.SetLockup=6]="SetLockup",r[r.Merge=7]="Merge",r[r.AuthorizeWithSeed=8]="AuthorizeWithSeed",r[r.InitializeChecked=9]="InitializeChecked",r[r.AuthorizeChecked=10]="AuthorizeChecked",r[r.AuthorizeCheckedWithSeed=11]="AuthorizeCheckedWithSeed",r[r.SetLockupChecked=12]="SetLockupChecked",r[r.GetMinimumDelegation=13]="GetMinimumDelegation",r[r.DeactivateDelinquent=14]="DeactivateDelinquent",r[r.MoveStake=15]="MoveStake",r[r.MoveLamports=16]="MoveLamports",r);function p(e,t){return e=>{if(!e.value)return;let t=e.isWritable?g.AccountRole.WRITABLE:g.AccountRole.READONLY;return Object.freeze({address:function(e){if(!e)throw Error("Expected a Address.");return"object"==typeof e&&"address"in e?e.address:Array.isArray(e)?e[0]:e}(e.value),role:m(e.value)?(0,g.upgradeRoleToSigner)(t):t,...m(e.value)?{signer:e.value}:{}})}}function m(e){return!!e&&"object"==typeof e&&"address"in e&&(0,s.isTransactionSigner)(e)}function A(e,t){let a=t?.programAddress??y,r={stake:{value:e.stake??null,isWritable:!0},clockSysvar:{value:e.clockSysvar??null,isWritable:!1},stakeAuthority:{value:e.stakeAuthority??null,isWritable:!1}};r.clockSysvar.value||(r.clockSysvar.value="SysvarC1ock11111111111111111111111111111111");let s=p();return{accounts:[s(r.stake),s(r.clockSysvar),s(r.stakeAuthority)],programAddress:a,data:(0,d.transformEncoder)((0,u.getStructEncoder)([["discriminator",(0,k.getU32Encoder)()]]),e=>({...e,discriminator:5})).encode({})}}function w(e,t){let a=t?.programAddress??y,r={stake:{value:e.stake??null,isWritable:!0},vote:{value:e.vote??null,isWritable:!1},clockSysvar:{value:e.clockSysvar??null,isWritable:!1},stakeHistory:{value:e.stakeHistory??null,isWritable:!1},unused:{value:e.unused??null,isWritable:!1},stakeAuthority:{value:e.stakeAuthority??null,isWritable:!1}};r.clockSysvar.value||(r.clockSysvar.value="SysvarC1ock11111111111111111111111111111111");let s=p();return{accounts:[s(r.stake),s(r.vote),s(r.clockSysvar),s(r.stakeHistory),s(r.unused),s(r.stakeAuthority)],programAddress:a,data:(0,d.transformEncoder)((0,u.getStructEncoder)([["discriminator",(0,k.getU32Encoder)()]]),e=>({...e,discriminator:2})).encode({})}}function f(e,t){let a=t?.programAddress??y,r={stake:{value:e.stake??null,isWritable:!0},rentSysvar:{value:e.rentSysvar??null,isWritable:!1}},s={...e};r.rentSysvar.value||(r.rentSysvar.value="SysvarRent111111111111111111111111111111111");let i=p();return{accounts:[i(r.stake),i(r.rentSysvar)],programAddress:a,data:(0,d.transformEncoder)((0,u.getStructEncoder)([["discriminator",(0,k.getU32Encoder)()],["arg0",(0,u.getStructEncoder)([["staker",(0,l.getAddressEncoder)()],["withdrawer",(0,l.getAddressEncoder)()]])],["arg1",(0,u.getStructEncoder)([["unixTimestamp",(0,k.getI64Encoder)()],["epoch",(0,k.getU64Encoder)()],["custodian",(0,l.getAddressEncoder)()]])]]),e=>({...e,discriminator:0})).encode(s)}}function E(e,t){let a=t?.programAddress??y,r={stake:{value:e.stake??null,isWritable:!0},recipient:{value:e.recipient??null,isWritable:!0},clockSysvar:{value:e.clockSysvar??null,isWritable:!1},stakeHistory:{value:e.stakeHistory??null,isWritable:!1},withdrawAuthority:{value:e.withdrawAuthority??null,isWritable:!1},lockupAuthority:{value:e.lockupAuthority??null,isWritable:!1}},s={...e};r.clockSysvar.value||(r.clockSysvar.value="SysvarC1ock11111111111111111111111111111111");let i=p();return{accounts:[i(r.stake),i(r.recipient),i(r.clockSysvar),i(r.stakeHistory),i(r.withdrawAuthority),i(r.lockupAuthority)].filter(e=>void 0!==e),programAddress:a,data:(0,d.transformEncoder)((0,u.getStructEncoder)([["discriminator",(0,k.getU32Encoder)()],["args",(0,k.getU64Encoder)()]]),e=>({...e,discriminator:4})).encode(s)}}let W="Stake11111111111111111111111111111111111111",T="SysvarC1ock11111111111111111111111111111111",b="SysvarStakeHistory1111111111111111111111111",M="StakeConfig11111111111111111111111111111111",B="he1iusunGwqrNtafDtLdhsUQDFvo13z9sUa36PauBtk",I=e=>{let t=(({rpc:e})=>async(t,a)=>{let r=await e.getMinimumBalanceForRentExemption(BigInt(200)).send(),u=BigInt(Math.round(1e9*a)),l=await (0,s.generateKeyPairSigner)(),d=(0,c.getCreateAccountInstruction)({payer:t,newAccount:l,lamports:r+u,space:BigInt(200),programAddress:W}),k=f({stake:l.address,arg0:{staker:t.address,withdrawer:t.address},arg1:{unixTimestamp:0n,epoch:0n,custodian:t.address}}),g=w({stake:l.address,vote:B,clockSysvar:T,stakeHistory:b,unused:M,stakeAuthority:t}),{value:v}=await e.getLatestBlockhash().send(),y=(0,i.pipe)((0,n.createTransactionMessage)({version:0}),e=>(0,n.setTransactionMessageFeePayer)(t.address,e),e=>(0,n.setTransactionMessageLifetimeUsingBlockhash)(v,e),e=>(0,n.appendTransactionMessageInstructions)([d,k,g],e)),h=await (0,s.signTransactionMessageWithSigners)(y);return{serializedTx:(0,o.getBase64EncodedWireTransaction)(h),stakeAccountPubkey:l.address}})({rpc:e}),a=(({rpc:e})=>async(t,a)=>{let r=A({stake:a,clockSysvar:T,stakeAuthority:t}),{value:c}=await e.getLatestBlockhash().send(),u=(0,i.pipe)((0,n.createTransactionMessage)({version:0}),e=>(0,n.setTransactionMessageFeePayer)(t.address,e),e=>(0,n.setTransactionMessageLifetimeUsingBlockhash)(c,e),e=>(0,n.appendTransactionMessageInstructions)([r],e)),l=await (0,s.signTransactionMessageWithSigners)(u);return{serializedTx:(0,o.getBase64EncodedWireTransaction)(l)}})({rpc:e}),r=(({rpc:e})=>async(t,a,r,c)=>{let u=E({stake:a,recipient:r,clockSysvar:T,stakeHistory:b,withdrawAuthority:t,args:c}),{value:l}=await e.getLatestBlockhash().send(),d=(0,i.pipe)((0,n.createTransactionMessage)({version:0}),e=>(0,n.setTransactionMessageFeePayer)(t.address,e),e=>(0,n.setTransactionMessageLifetimeUsingBlockhash)(l,e),e=>(0,n.appendTransactionMessageInstructions)([u],e)),k=await (0,s.signTransactionMessageWithSigners)(d);return{serializedTx:(0,o.getBase64EncodedWireTransaction)(k)}})({rpc:e}),u=(({rpc:e})=>async t=>{let a=t.toString();return(await e.getProgramAccounts(W,{encoding:"jsonParsed",filters:[{memcmp:{offset:44n,bytes:a,encoding:"base58"}}]}).send()).filter(e=>e.account?.data?.parsed?.info?.stake?.delegation?.voter===B)})({rpc:e}),d=(({rpc:e})=>async(t,a=!1)=>{let r="string"==typeof t?(0,l.address)(t):t,{value:s}=await e.getAccountInfo(r,{encoding:"jsonParsed"}).send();if(!s)throw Error("Stake account not found");let{lamports:i,data:n}=s,o=n?.parsed;if(!o?.info?.meta)throw Error("Not a valid stake account");let c=o.info;if(!c.stake&&c.meta?.type!=="initialized")throw Error("Not a valid stake account");if(BigInt(c.stake?.delegation?.deactivationEpoch??"18446744073709551615".toString())>BigInt((await e.getEpochInfo().send()).epoch))return 0;if(a)return Number(i);let u=await e.getMinimumBalanceForRentExemption(BigInt(200)).send();return Number(i>u?i-u:0n)})({rpc:e});return{createStakeTransaction:t,createUnstakeTransaction:a,createWithdrawTransaction:r,getHeliusStakeAccounts:u,getWithdrawableAmount:d,getStakeInstructions:(({rpc:e})=>async(t,a)=>{let r=await e.getMinimumBalanceForRentExemption(BigInt(200)).send()+BigInt(Math.round(1e9*a)),i=await (0,s.generateKeyPairSigner)();return{instructions:[(0,c.getCreateAccountInstruction)({payer:t,newAccount:i,lamports:r,space:BigInt(200),programAddress:W}),f({stake:i.address,arg0:{staker:t.address,withdrawer:t.address},arg1:{unixTimestamp:0n,epoch:0n,custodian:t.address}}),w({stake:i.address,vote:B,clockSysvar:T,stakeHistory:b,unused:M,stakeAuthority:t})],stakeAccount:i}})({rpc:e}),getUnstakeInstruction:(e,t)=>A({stake:t,stakeAuthority:e,clockSysvar:T}),getWithdrawInstruction:(e,t,a,r)=>E({stake:t,recipient:a,clockSysvar:T,stakeHistory:b,withdrawAuthority:e,args:r})}};e.s(["makeStakeClientLazy",()=>I],70778)}]);